{% extends extends %}
{% load i18n discovery_tags ckeditor_tags wagtailcore_tags contrib_tags %}

{% block phase_content %}
    <div class="container">
        <div class="col-12">
            <div class="alert" role="alert">
                <i class="fas fa-info-circle" aria-hidden="true"></i>
                {% trans 'During this event you can hand in questions with your smartphone' %}
            </div>
        </div>
        <div class="row mx-md-4 my-4 justify-content-center">
            {% if extra_fields.event_image %}
                <div class="col-md-6 mb-4">
                    <img src="/media/{{ extra_fields.event_image }}" />
                </div>
            {% endif %}
            <div class="col-md-6">
                {% for phase in module.phases %}
                    {% if phase == module.active_phase and extra_fields.live_stream %}
                        <span class="label label--live">â€¢{% trans ' Live now' %}</span>
                        &nbsp;
                    {% endif %}
                    <span class="label">{% trans 'Interactive' %}</span>
                    <h1>{{ module.name }}</h1>
                    <div class="mb-2">
                        {{ module.description | transform_collapsibles | richtext }}
                    </div>
                    {% if phase.is_over or phase == module.active_phase %}
                        <div class="phase-info__item u-no-border">
                            <div class="font-weight-bold mb-1">
                                {% html_date phase.start_date 'DATETIME_FORMAT' %}
                                &ndash; {% html_date phase.end_date 'DATETIME_FORMAT' %}
                            </div>
                            <div class="mb-5">
                                {% if phase.description|length > 80 %}
                                    <div id="collapsibleContent" class="collapse show u-no-transition">
                                        {{ phase.description|truncatechars:80|richtext }}
                                    </div>
                                    <div id="collapsibleContent" class="collapse u-no-transition">
                                        {{ phase.description|richtext }}
                                    </div>
                                    <button
                                        class="btn--link collapsible    "
                                        type="button" data-toggle="collapse"
                                        data-target="#collapsibleContent"
                                        aria-expanded="false"
                                        aria-controls="collapseExample"
                                    >
                                        <span class="link--more">{% trans 'Read more' %}</span>
                                        <span class="link--less">{% trans 'Read Less' %}</span>
                                    </button>
                                {% else %}
                                    {{ phase.description|richtext }}
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
                {% if not module.future_phases %}
                <a class="btn btn--primary" href="{% url 'live-question-module-detail' module.project.organisation.slug module.slug %}">{% trans 'Go to event' %}</a>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
