{% load i18n project_tags a4_candy_project_tags contrib_tags thumbnail rules %}
{% project_tile_image project as project_image %}
{% project_tile_image_copyright project as project_image_copyright %}

<li class="tile organisation__tile userdashboard__tile">
    <div class="tile__head">
        <div class="tile__image tile__image--sm"
          {% if project_image %}
              style="background-image: url({{ project_image|thumbnail_url:'project_thumbnail' }})"
          {% endif %}>
          {% if project_image_copyright %}
              <div class="tile__image__copyright copyright">Â© {{ project_image_copyright }}</div>
          {% endif %}
          {% if project.is_private %}
            <div class="tile__private-badge">
                <div class="tile__private-badge--top"></div>
                    <i class="fas fa-lock" title="{% trans 'Project is private.' %}" aria-label="{% trans 'Project is private.' %}"></i>
                <div class="tile__private-badge--left"></div>
            </div>
          {% elif project.is_semipublic %}
            <div class="tile__private-badge">
                <div class="tile__private-badge--top"></div>
                    <i class="fas fa-eye" title="{% trans 'Project is semi-public.' %}" aria-label="{% trans 'Project is semi-public.' %}"></i>
                <div class="tile__private-badge--left"></div>
            </div>

          {% endif %}
        </div>
    </div>
    <div class="tile__body">
        <span class="text-muted">{% trans 'By ' %}{{ project.organisation.name }}</span>
        <h3 class="tile__title mb-4" id="project-title-{{ project.pk }}">
            <a href="{{ project|project_url }}">
              {% if project.name|length > 40 %}
                  {{ project.name|slice:40}}...
              {% else  %}
                  {{ project.name }}
              {% endif %}
            </a>
        </h3>

        {% if project.running_modules %}
        <div class="status-item--baseline">
            <span class="status-bar__status"><i class="fas fa-clock" aria-hidden="true"></i>
            {% if project.module_running_days_left < 365 %}
            {% blocktrans with time_left=project.module_running_time_left %} {{ time_left }} remaining {% endblocktrans %}
            {% else %}
            <span>{% trans 'more than 1 year remaining' %}</span>
            {% endif %}
            </span>
        </div>
        {% elif project.future_modules %}
        <div class="status-item--baseline">
            <span class="status-bar__status"><i class="fas fa-clock" aria-hidden="true"></i>{% blocktrans with date=project.future_modules.first.module_start.date|date:"d.m.Y" %} Participation: from {{ date }}{% endblocktrans %}</span>
        </div>
        {% elif project.past_modules %}
        <div class="status-item--baseline status-bar__past status-bar__past--sm">
            {% blocktrans %}Participation ended. Read result.{% endblocktrans %}
        </div>
        {% endif %}
    </div>
    <a class="tile__link" aria-labelledby="project-title-{{ project.pk }}" href="{{ project|project_url }}">
    </a>
</li>
