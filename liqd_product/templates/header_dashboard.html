{% load i18n userindicator %}
{% get_current_language as LANGUAGE_CODE %}

<header class="main-header" aria-label="{% trans 'Header' %}">
    <div class="main-header__border-top main-header__border-top--platform"></div>
    <div class="l-wrapper">
        <div class="platform-brand main-header__brand">
            {% spaceless %}
                <a href="{% if view.organisation.partner %}{% url 'partner' partner_slug=view.organisation.partner.slug %}{% else %}/{% endif %}" class="platform-brand__link">{% if view.organisation.partner %}<h3 class="heading--sm-margin">{{ view.organisation.partner.name }}</h3>{% else %}Beteiligung.in{% endif %}</a>
            {% endspaceless %}
        </div>
        <nav class="main-header__nav">

            <div class="main-header__mobile-menu main-header__mobile-menu--platform collapse" id="main-header-collapse">
                <div class="main-header__user">
                    {% userindicator %}
                </div>
            </div>
            <div class="main-header__lang">
                {% get_available_languages as languages %}
                {% for lang_code, lang_name in languages %}
                    {% if lang_code != LANGUAGE_CODE %}
                        {% get_language_info for lang_code as lang %}
                            <form class="lang__switch" action="{% url 'set_language' %}" method="post">{% csrf_token %}
                                <input name="next" type="hidden" value="{{ redirect_to }}" />
                                <input name="language" type="hidden" value="{{ lang_code }}">
                                {% if LANGUAGE_CODE == 'de' %}
                                <a class="lang__btn--left" role="button">de</a><button class="lang__btn--right" type="submit">en</button>
                                {% else %}
                                <button class="lang__btn--left" type="submit">de</button><a class="lang__btn--right" role="button">en</a>
                                {% endif %}
                            </form>
                    {% endif %}
                {% endfor %}
            </div>
            <button class="btn main-header__mobile-toggle btn--secondary-filled main-header__mobile-toggle--platform btn--square btn--small btn--attached-top" data-toggle="collapse" data-target="#main-header-collapse" aria-expanded="false" aria-controls="main-header-collapse">
                {% trans 'Menu' %}
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
        </nav>
    </div>
</header>
